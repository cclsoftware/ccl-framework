//************************************************************************************************
//
// This file is part of Crystal Class Library (R)
// Copyright (c) 2025 CCL Software Licensing GmbH.
// All Rights Reserved.
//
// Licensed for use under either:
//  1. a Commercial License provided by CCL Software Licensing GmbH, or
//  2. GNU Affero General Public License v3.0 (AGPLv3).
// 
// You must choose and comply with one of the above licensing options.
// For more information, please visit ccl.dev.
//
// Filename    : ccl/app/editing/editlayer.cpp
// Description : Edit Layer
//
//************************************************************************************************

#include "ccl/app/editing/editlayer.h"
#include "ccl/app/editing/editor.h"

using namespace CCL;

//************************************************************************************************
// EditLayer
//************************************************************************************************

DEFINE_CLASS_ABSTRACT_HIDDEN (EditLayer, Object)

//////////////////////////////////////////////////////////////////////////////////////////////////

EditLayer::EditLayer (EditorComponent* editor, StringID name)
: component (editor),
  name (name)
{}

//////////////////////////////////////////////////////////////////////////////////////////////////

EditModel& EditLayer::getModel () const
{
	ASSERT (component)
	return component->getModel ();
}

//////////////////////////////////////////////////////////////////////////////////////////////////

EditorComponent* EditLayer::getEditor () const
{
	return component;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::handlesView (EditView* editView)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Selection& EditLayer::getSelection () const
{
	return getModel ().getSelection ();
}

//////////////////////////////////////////////////////////////////////////////////////////////////

void EditLayer::onSelectionCreated (Selection& selection)
{}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::containsAnyItems ()
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Object* EditLayer::findItem (EditView& editView, PointRef where)
{
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Object* EditLayer::findItemPart (EditView& editView, Object* item, PointRef where)
{
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Object* EditLayer::findItemDeep (EditView& editView, PointRef where)
{
	if(Object* item = findItem (editView, where))
	{
		if(Object* part = findItemPart (editView, item, where))
		{
			item->release ();
			return part;
		}
		return item;
	}
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Object* EditLayer::findItemAfterSelection ()
{
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

String EditLayer::getItemType (Object* item)
{
	return String::kEmpty;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::getItemSize (Rect& size, EditView& editView, Object* item)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::getItemTooltip (String& tooltip, EditView& editView, Object* item)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

String EditLayer::getEditArea (EditView& editView, PointRef where)
{
	return String::kEmpty;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::canSelectItem (Object* item)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::selectItems (EditView& editView, RectRef rect)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::selectAll ()
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::setFocusItem (Object* item, EditView* editView)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::editItem (Object* item, EditView& editView)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::navigate (EditModel::Direction direction, EditModel::NavigationMode mode)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::deleteSelected ()
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::deleteItem (Object* item)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

Object* EditLayer::copySelected (bool shared)
{
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::canInsertData (Object* data)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

bool EditLayer::insertData (Object* data)
{
	return false;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

IDragHandler* EditLayer::createDragHandler (EditView& editView, const DragEvent& event)
{
	return nullptr;
}

//////////////////////////////////////////////////////////////////////////////////////////////////

void EditLayer::updateHighlightItem (EditView& editView, PointRef where) {}

//////////////////////////////////////////////////////////////////////////////////////////////////

void EditLayer::hideHighlight () {}
